<div style="height:10rem"></div>
<h1 style="text-align:center">{title:s}</h1>
<div style="height:2rem"></div>
<table style="width:100%">
  <tbody>
    <tr>
      <td style="padding-left:{padding:d}%;width:{width:d}%;position:absolute">
        <h3>Players</h3>
        <div style="height:{height:.1f}rem">
          <div style="height:1rem"></div>
          <ul style="list-style:none;padding-left:5px" id="player-list">
            {players:s}
          </ul>
          <p style="font-size:medium;padding-left:5px">Spectators: {spectators:d}</p>
          {button:s}
        </div>
      </td>
      {options:s}
    </tr>
  </tbody>
</table>
<script type="text/javascript">
  $(document).ready(function () {{
    let cookie_str = document.cookie;
    var cookies = cookie_str.split('; ');
    for (cookie of cookies) {{
      let k_and_v = cookie.split('=');
      if (k_and_v[0] == 'show-log') {{
        $('#show-log').prop('checked', k_and_v[1] == 'true');
      }}
    }}
    if ($('#player-list').children('li').length % 2 != 0) {{
      $('#start-game').prop('disabled', true);
      $('#start-game').prop('title', 'Must have an even number of players');
    }} else {{
      $('#start-game').prop('disabled', false);
      $('#start-game').removeProp('title');
    }}
    setTimeout(function() {{
      if (!$('#join-form').hasClass('show')) {{
        window.location.reload(true);
      }}
    }}, 5000);
    $('#show-log').change(function() {{
      let new_cookie = ['show-log', $('#show-log').prop('checked')].join('=');
      // Set cookie for Chrome
      if (navigator.userAgent.indexOf("Chrome") > -1) {{
        document.cookie = new_cookie;
        return;
      }}
      for (i = 0; i < cookies.length; i++) {{
        let k_and_v = cookies[i].split('=');
        if (k_and_v[0] == 'show-log') {{
          cookies[i] = new_cookie;
          document.cookie = cookies.join('; ');
          return;
        }}
      }}
      cookies.push(new_cookie);
      document.cookie = cookies.join('; ');
    }});
  }});
</script>
